---
description: Testing strategy and coverage.
globs:
    - "Tests/**"
    - "Features/**"
---
- Use XCTest (Not SwiftTest)
- Add reducer tests for each feature (happy/error).
- Add integration tests:
    - Token refresh flow (401 → refresh → retry).
    - Offline read → online merge.
- Add snapshot tests for:
    - App entry (logged-in vs logged-out).
    - Dashboard cards (light/dark, XL text).
- Add unit tests:
    - Keychain wrapper.
    - Error map (HTTP → domain).
    - Log export file (exists, PII redacted).
- Keep coverage from regressing. Enforce minimum in CI.